## Title

### Description 
This project is created with idea to collect Netflow v5 and Syslog data generated by Juniper firewall.  
This project is under development. 

### Requirements
Python 3.11, pip  
Linux Nfdump package
Docker compose to run Clickhouse database and Grafana containers.
Application is developed and tested only with Debian 12. 

### Install 
Install nfdump 
sudo apt-get update
sudo apt-get install nfdump

#### Install required python packages 
pip install -r requirements.txt
run script directory_path.py to created needed directories.
Download GeoLite database files from https://github.com/P3TERX/GeoLite.mmdb or create MixMind account to 
download the latest database files directly form MaxMind. Application require GeoLite2-ASN.mmdb and 
GeoLite2-Country.mmdb files.

### Data collection
Netflow v5 flows and syslog messages are generated by Juniper SRX, used as firewall device connected to internet. 
Syslog messages are generated by Juniper SRX. Syslog messages are collected by python logging module and parsed before
inserted to the database 
To do: script to delete files older than one day.

### Data storage
Flows are stored locally with nfcapd and parsed by nfdump, they are enhanced with ASN and country information
provided by MaxMind database and inserted into Clickhouse database along with other Netflow v5 fields.
To do: script to create database schema. 

### Detectors
Detection of volumetric DDoS for NTP, DNS and Memcached packets. Detected source IP's are automatically inserted to
firewall prefix list to block incoming traffic.
SSH login attempts from unknown IP addresses will be reported and blocket on firewall (not currently developed).
Syslog SSH login messages are stored into the database. 

### Data visualisation
Netflow and syslog data are visualised with custom Grafana dashboard using ClickHouse data source for Grafana.
